# 《默示录-Link》策划文档：人物属性系统 v1.3

| **文档版本** | **v1.3**                                                  |
| :------- | :-------------------------------------------------------- |
| **创建日期** | 2025年8月4日                                                 |
| **文档目的** | 本文档旨在完整、精确地阐述人物属性的结构、计算流程和所有核心公式，作为游戏策划、运营及后续数值调整的核心参考依据。 |
| **目标读者** | 游戏策划、运营、数值策划及项目管理人员。                                      |

### **1. 系统设计概述**

本游戏的属性系统遵循\*\*“分层转化”\*\*的核心设计哲学，旨在构建一个既有深度、又易于扩展和维护的数值体系。其核心特点如下：

*   **逻辑分层**: 属性被清晰地划分为\*\*“一级基础属性”**（玩家投入的源头）、**“二级详细属性”**（角色面板的表现）和**“三级战斗判定属性”\*\*（战斗中的最终结果）。这种结构使得数值的来源和作用一目了然。
*   **边际收益递减**: 为了保证游戏长期的数值健康，防止后期属性无限膨胀，多个核心属性都采用了\*\*“边际收益递减”\*\*机制。这意味着玩家在某个属性上投入得越多，每一点投入带来的提升会逐渐减少，鼓励玩家进行更多样化的属性搭配。
*   **配置化**: 所有核心的转换公式、阈值和收益率都将作为**可配置项**，这意味着策划人员可以在不改动程序代码的情况下，通过修改配置文件来灵活、快速地进行游戏平衡性调整。

### **2. 属性分层详解**

#### **2.1 一级基础属性 (Base Stats)**

这是所有计算的起点，是角色构筑（Build）的核心。它们来源于等级成长、装备、技能、武器熟练度等。

| 属性名称      | 作用与设计说明                               |
| :-------- | :------------------------------------ |
| **基础攻击力** | 影响所有物理伤害的根本数值。                        |
| **基础魔源力** | 影响所有法术伤害的根本数值。                        |
| **基础防御力** | 对抗物理伤害的核心，用于换算物理伤害减免。                 |
| **基础魔防力** | 对抗法术伤害的核心，用于换算魔源伤害减免。                 |
| **基础命中**  | 复合型进攻属性，既能确保攻击命中，又能提升伤害的稳定性（减少随机浮动）。  |
| **基础闪避**  | 对抗命中的唯一手段，高投入下可实现完全免伤，是一种高风险高回报的防御方式。 |
| **基础暴击**  | 复合型爆发属性，同时决定暴击的“频率”（暴击率）和“质量”（暴击伤害）。  |
| **基础耐性**  | 对抗暴击的核心，同时降低被暴击的几率和受到的暴击伤害。           |
| **基础精通**  | “效果强度”属性，全面影响异常状态、增益、减益和治疗的效果。        |
| **基础抗性**  | “韧性”属性，全面抵抗异常状态，并少量提升其他防御属性。          |
| **基础神圣力** | 治疗和神圣系职业的核心，决定其治疗量和部分技能伤害。            |
| **基础速度**  | 决定战斗中的出手频率，是行动条系统的核心。                 |

#### **2.2 隐藏一级属性 (Hidden Base Stats)**

这些属性同样是基础数值，但通常不直接展示给玩家，用于深层战斗机制。

| 属性名称     | 作用与设计说明                               |
| :------- | :------------------------------------ |
| **格挡能力** | 专门用于换算“格挡几率”和“格挡效果”的数值，体现了一种更稳定的减伤机制。 |
| **穿透力**  | “破甲”属性，用于换算“穿透率”，是后期攻克高防御目标的关键。       |

#### **2.3 二级详细属性 (Calculated Stats)**

这些是最终展示在角色面板上的属性，由一级属性换算而来。

| 属性名称                | 作用与设计说明                   |
| :------------------ | :------------------------ |
| **最终攻击力/魔源力/神圣力**   | 经过修正后，用于计算伤害/治疗的最终数值。     |
| **最终速度**            | 战斗中，每秒为角色增加的行动条数值。        |
| **物理/魔源伤害减免 %**     | 角色能够以百分比形式抵挡的对应伤害。        |
| **最终命中率/闪避率 %**     | 角色的命中/闪避能力，将在战斗中进行对抗。     |
| **最终暴击率/暴击伤害 %**    | 角色的暴击能力和暴击伤害倍率。           |
| **最终抗暴率/暴伤抵抗 %**    | 角色的抗暴能力和暴击伤害减免能力。         |
| **伤害增加 %**          | 全局性的伤害增幅，效果显著。            |
| **异常几率/效果/伤害增加 %**  | 全面提升角色施加异常状态的能力。          |
| **异常几率/效果/伤害抵抗 %**  | 全面降低角色受到异常状态影响的能力。        |
| **增益效果 %**          | 提升角色释放的增益技能的效果强度。         |
| **治疗效果 % / 受疗效果 %** | 分别提升角色“释放治疗”和“受到治疗”的效果。   |
| **伤害稳定 %**          | 决定伤害的随机浮动下限，越高则伤害越稳定。     |
| **格挡几率 % / 格挡效果 %** | 角色成功格挡的概率，以及格挡时额外减免的伤害比例。 |
| **穿透率 %**           | 攻击时，能够按百分比无视敌人的部分防御属性。    |

#### **2.4 三级战斗判定属性 (Combat-Adjudicated Stats)**

这些是在战斗瞬间，由攻防双方的二级属性对抗后得出的最终结果。

| 属性名称        | 作用与设计说明              |
| :---------- | :------------------- |
| **实际命中率**   | 决定本次攻击是否命中的最终概率。     |
| **实际暴击率**   | 决定本次攻击是否暴击的最终概率。     |
| **实际暴击伤害**  | 决定本次暴击的最终伤害倍率。       |
| **实际伤害减免**  | 决定本次攻击实际减免的伤害比例。     |
| **实际异常成功率** | 决定本次异常状态是否成功附加的最终概率。 |

### **3. 核心计算公式与逻辑**

#### **3.1 边际收益递减机制与参数配置**

本系统采用**分段线性函数**来实现边际收益。可以将其理解为“个人所得税”的计算方式：角色的基础属性值落在不同的“税级”（阈值）中，每个“税级”的“税率”（收益率）都不同。

**通用函数 f(x) 定义**

为了让数值策划能够精确计算和调优，我们将通用的边际收益函数 `f(x)` 定义如下。其中 `x` 代表任意一个“换算基础值”（例如，物理伤害减免的换算基础值）。

该函数通过读取对应属性的**配置参数**来进行计算。每个属性的配置包含以下部分：

*   **初始值 (Init)**: 当 `x = 0` 时的百分比。
*   **分层阈值 (T1, T2, T3, ...)**: 定义了不同收益区间的边界。
*   **分层收益率 (R1, R2, R3, ...)**: 定义了在每个区间内，每点 `x` 值能转换的百分比。
*   **上限 (Max)**: 该属性最终不能超过的百分比。

**计算公式:**

`f(x) = 初始值 + 段落1收益 + 段落2收益 + 段落3收益 + ...`

其中，每个段落的收益计算方式为：

*   **段落1收益**: `MIN(x, T1) * R1`
*   **段落2收益**: `MAX(0, MIN(x - T1, T2 - T1)) * R2`
*   **段落3收益**: `MAX(0, MIN(x - T2, T3 - T2)) * R3`
*   ...以此类推。

最终，`最终结果 = MIN(f(x), 上限)`。

**各属性详细配置参数**

| 二级属性          | 换算基础值 (x)                          | 初始值  | 分段 (阈值:收益率)                                                                                                    | 上限   |
| :------------ | :--------------------------------- | :--- | :------------------------------------------------------------------------------------------------------------- | :--- |
| **物理/魔源伤害减免** | `(基础防御/魔防 * 防御性能) + (基础抗性 * 0.05)` | 0%   | T1=200: **0.15%**\<br>T2=500: **0.10%**\<br>T3=1000: **0.05%**\<br>T4=2000: **0.025%**\<br>T5=5000: **0.01%**  | 95%  |
| **最终命中率**     | `基础命中`                             | 80%  | T1=200: **0.20%**\<br>T2=500: **0.15%**\<br>T3=1000: **0.10%**\<br>T4=2000: **0.05%**                          | 250% |
| **最终闪避率**     | `基础闪避`                             | 5%   | T1=200: **0.25%**\<br>T2=500: **0.15%**\<br>T3=1000: **0.10%**\<br>T4=2000: **0.05%**                          | 155% |
| **最终暴击率**     | `基础暴击`                             | 5%   | T1=200: **0.30%**\<br>T2=500: **0.20%**\<br>T3=1000: **0.15%**\<br>T4=2000: **0.10%**\<br>T5=5000: **0.05%**   | 180% |
| **最终暴击伤害**    | `基础暴击`                             | 120% | T1=200: **0.40%**\<br>T2=500: **0.20%**\<br>T3=1000: **0.10%**\<br>T4=2000: **0.05%**\<br>T5=5000: **0.02%**   | 350% |
| **最终抗暴率**     | `基础耐性 + (基础抗性 * 0.1)`              | 0%   | T1=200: **0.25%**\<br>T2=500: **0.15%**\<br>T3=1000: **0.10%**\<br>T4=2000: **0.05%**\<br>T5=5000: **0.02%**   | 150% |
| **最终暴伤抵抗**    | `基础耐性 + (基础抗性 * 0.1)`              | 0%   | T1=200: **0.30%**\<br>T2=500: **0.20%**\<br>T3=1000: **0.10%**\<br>T4=2000: **0.05%**\<br>T5=5000: **0.025%**  | 180% |
| **异常几率增加**    | `基础精通`                             | 0%   | T1=200: **0.20%**\<br>T2=500: **0.12%**\<br>T3=1000: **0.08%**\<br>T4=2000: **0.04%**\<br>T5=5000: **0.02%**   | 120% |
| **异常效果增加**    | `基础精通`                             | 0%   | T1=200: **0.10%**\<br>T2=500: **0.06%**\<br>T3=1000: **0.04%**\<br>T4=2000: **0.02%**\<br>T5=5000: **0.01%**   | 70%  |
| **异常伤害增加**    | `基础精通`                             | 0%   | T1=200: **0.50%**\<br>T2=500: **0.30%**\<br>T3=1000: **0.20%**\<br>T4=2000: **0.10%**\<br>T5=5000: **0.05%**   | 300% |
| **异常几率抵抗**    | `基础抗性 + (基础神圣力 * 0.05)`            | 0%   | T1=200: **0.10%**\<br>T2=500: **0.06%**\<br>T3=1000: **0.04%**\<br>T4=2000: **0.02%**\<br>T5=5000: **0.01%**   | 70%  |
| **异常效果抵抗**    | `基础抗性 + (基础神圣力 * 0.05)`            | 0%   | T1=200: **0.07%**\<br>T2=500: **0.04%**\<br>T3=1000: **0.02%**\<br>T4=2000: **0.01%**\<br>T5=5000: **0.005%**  | 50%  |
| **异常伤害抵抗**    | `基础抗性 + (基础神圣力 * 0.05)`            | 0%   | T1=200: **0.35%**\<br>T2=500: **0.20%**\<br>T3=1000: **0.15%**\<br>T4=2000: **0.08%**\<br>T5=5000: **0.04%**   | 200% |
| **增益/治疗效果**   | `基础精通 + (基础神圣力 * 0.05)`            | 0%   | T1=200: **0.20%**\<br>T2=500: **0.12%**\<br>T3=1000: **0.08%**\<br>T4=2000: **0.04%**\<br>T5=5000: **0.02%**   | 120% |
| **格挡几率**      | `格挡能力`                             | 1%   | T1=200: **0.12%**\<br>T2=500: **0.08%**\<br>T3=1000: **0.04%**\<br>T4=2000: **0.02%**                          | 75%  |
| **格挡效果**      | `格挡能力`                             | 20%  | T1=200: **0.10%**\<br>T2=500: **0.05%**\<br>T3=1000: **0.02%**\<br>T4=2000: **0.01%**                          | 75%  |
| **穿透率**       | `穿透力`                              | 0%   | T1=200: **0.15%**\<br>T2=500: **0.08%**\<br>T3=1000: **0.04%**\<br>T4=2000: **0.02%**                          | 75%  |
| **伤害稳定**      | `基础命中 + (基础精通 * 0.2)`              | 65%  | T1=200: **0.05%**\<br>T2=500: **0.02%**\<br>T3=1000: **0.01%**\<br>T4=2000: **0.005%**\<br>T5=5000: **0.002%** | 92%  |

#### **3.3 最终战斗判定公式**

所有判定结果都会被强制限制在一个预设的\*\*上下限（clamp）\*\*区间内，以防止出现极端情况。

*   **实际命中率**

    1.  `基础对抗值 = 攻击方.最终命中率% - 防御方.最终闪避率%`
    2.  `实际命中率% = MAX(60%, MIN(基础对抗值, 98%))`
*   **实际暴击率**

    1.  `基础对抗值 = 攻击方.最终暴击率% - 防御方.最终抗暴率%`
    2.  `实际暴击率% = MAX(1%, MIN(基础对抗值, 80%))`
*   **实际暴击伤害**

    1.  `基础对抗值 = 攻击方.最终暴击伤害% - 防御方.最终暴伤抵抗%`
    2.  `实际暴击伤害% = MAX(120%, MIN(基础对抗值, 200%))`
*   **实际伤害减免**

    1.  `基础对抗值 = 防御方.伤害减免% * (1 - 攻击方.穿透率%)`
    2.  `实际伤害减免% = MAX(30%, MIN(基础对抗值, 95%))`
*   **实际异常成功率**

    1.  `基础对抗值 = 技能基础成功率% * (1 + 攻击方.异常几率增加% - 防御方.异常几率抵抗%)`
    2.  `实际异常成功率% = MAX(0%, MIN(基础对抗值, 100%))`
*   **实际异常效果** = `技能基础效果 * (1 + 攻击方.异常效果增加% - 防御方.异常效果抵抗%)`
*   **实际异常伤害** = `技能基础伤害 * (1 + 攻击方.异常伤害增加% - 防御方.异常伤害抵抗%)`
*   **最终治疗量** = `技能基础治疗量 * (1 + 治疗方.治疗效果%) * (1 + 受疗方.受疗效果%)`

#### **3.4 最终伤害计算流程**

一次攻击的最终伤害遵循以下顺序进行计算：

1.  **判定命中**: 若未命中，则伤害为0。
2.  **计算基础伤害**: 取攻击方的`最终攻击力`或`最终魔源力`。
3.  **计算伤害减免**: `减免后伤害 = 基础伤害 * (1 - 防御方.实际伤害减免%)`
4.  **计算增益加成**: `增益后伤害 = 减免后伤害 * (1 + 攻击方.伤害增加%)`
5.  **判定暴击与格挡**:

    *   如果**暴击**，则: `暴击后伤害 = 增益后伤害 * 实际暴击伤害%`
    *   如果**格挡**，则: `格挡后伤害 = [暴击后或增益后]伤害 * (1 - 防御方.格挡效果%)`
6.  **计算伤害稳定**: `稳定后伤害 = [修正后]伤害 * random(伤害稳定%, 100%)`
7.  **最终裁定**:

    *   `裁定伤害 = floor(稳定后伤害)` (向下取整)
    *   `伤害下限 = floor(基础伤害 * 5%)`
    *   `最终伤害 = MAX(裁定伤害, 伤害下限)`

